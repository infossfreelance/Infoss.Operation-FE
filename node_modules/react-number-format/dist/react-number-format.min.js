!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t((e=e||self).NumberFormat={},e.React)}(this,function(e,T){"use strict";var R,t,k="default"in T?T.default:T;function M(e,t){var r={};for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(r[a[n]]=e[a[n]]);return r}function P(){}function I(e){return!!(e||"").match(/\d/)}function w(e){return null==e}function x(e){return"number"==typeof e&&isNaN(e)}function m(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function d(e,t,r){var r=function(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;default:return/(\d)(?=(\d{3})+(?!\d))/g}}(r),n=-1===(n=e.search(/[1-9]/))?e.length:n;return e.substring(0,n)+e.substring(n,e.length).replace(r,"$1"+t)}function g(e,t){void 0===t&&(t=!0);var r="-"===e[0],t=r&&t,e=(e=e.replace("-","")).split(".");return{beforeDecimal:e[0],afterDecimal:e[1]||"",hasNegation:r,addNegation:t}}function v(e,t,r){for(var n="",a=r?"0":"",o=0;o<=t-1;o++)n+=e[o]||a;return n}function a(e,t){return Array(t+1).join(e)}function D(e){var t,e=e+"",r="-"===e[0]?"-":"",e=(e=r?e.substring(1):e).split(/[eE]/g),n=e[0],e=e[1];return(e=Number(e))&&(e=1+e,t=(n=n.replace(".","")).length,e<0?n="0."+a("0",Math.abs(e))+n:t<=e?n+=a("0",e-t):n=(n.substring(0,e)||"0")+"."+n.substring(e)),r+n}function O(e,t,r){var n,a,o,u;return-1!==["","-"].indexOf(e)?e:(n=(-1!==e.indexOf(".")||r)&&t,a=(e=g(e)).beforeDecimal,u=e.afterDecimal,e=e.hasNegation,o=parseFloat("0."+(u||"0")),u=(u.length<=t?"0."+u:o.toFixed(t)).split("."),(e?"-":"")+a.split("").reverse().reduce(function(e,t,r){return e.length>r?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e},u[0])+(n?".":"")+v(u[1]||"",t,r))}function K(e,t){var r;e.value=e.value,null!==e&&(e.createTextRange?((r=e.createTextRange()).move("character",t),r.select()):e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t)):e.focus())}function p(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function h(e,t){return"string"==typeof(e=void 0===e?" ":e)?e:e[t]||" "}function L(e,t,r,n){var a,o,u=e.length;if(e=t,a=0,o=u,t=Math.min(Math.max(e,a),o),"left"===n){for(;0<=t&&!r[t];)t--;-1===t&&(t=r.indexOf(!0))}else{for(;t<=u&&!r[t];)t++;u<t&&(t=r.lastIndexOf(!0))}return t=-1===t?u:t}function W(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,n=t.length;r<n;r++)t[r]=Boolean(I(e[r])||I(e[r-1]));return t}function U(e,t,r,n,a,o){void 0===o&&(o=P);var u,i=T.useRef(),l=(c=function(e){var t,e=w(e)||x(e)?t="":"number"==typeof e||r?(t="number"==typeof e?D(e):e,n(t)):(t=a(e,void 0),e);return{formattedValue:e,numAsString:t}},(u=T.useRef(c)).current=c,T.useRef(function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return u.current.apply(u,e)}).current),c=T.useState(function(){return l(t)}),s=c[0],f=c[1];return T.useMemo(function(){w(e)?i.current=void 0:(i.current=l(e),f(i.current))},[e,l]),[s,function(e,t){f({formattedValue:e.formattedValue,numAsString:e.value}),o(e,t)}]}function G(e){return e.replace(/[^0-9]/g,"")}function $(e){return e}function r(e){function c(e,t,r){K(e,t),F.current.setCaretTimeout=setTimeout(function(){e.value===r&&K(e,t)},0)}function i(e,t,r){return L(e,t,x(e),r)}function s(e,t,r){var n=x(t);return L(t,function(e,t,r,n,a){for(var a=a.findIndex(function(e){return e}),a=e.slice(0,a),o=(t||r.startsWith(a)||(r=a+r,n+=a.length),r.length),u=e.length,i={},l=new Array(o),c=0;c<o;c++){l[c]=-1;for(var s=0,f=u;s<f;s++)if(r[c]===e[s]&&!0!==i[s]){i[l[c]=s]=!0;break}}for(var d=n;d<o&&(-1===l[d]||!I(r[d]));)d++;for(t=d===o||-1===l[d]?u:l[d],d=n-1;0<d&&-1===l[d];)d--;return a=-1===d||-1===l[d]?0:l[d]+1,!(t<a)&&n-a<t-n?a:t}(t,D,e,r,n),n)}function r(e,t,r){var n=function(e,t){for(var r=0,n=0,a=e.length,o=t.length;e[r]===t[r]&&r<a;)r++;for(;e[a-1-n]===t[o-1-n]&&r<o-n&&r<a-n;)n++;return{from:{start:r,end:a-n},to:{start:r,end:o-n}}}(D,e),n=Object.assign(Object.assign({},n),{lastValue:D}),n=f(e,n),a=B(n);return!(v&&!v(j(a,n)))&&(A({formattedValue:a,numAsString:n,inputValue:e,event:t,source:r,setCaretPosition:!0,input:t.target}),!0)}var t=e.type,n=(void 0===t&&(t="text"),e.displayType),a=(void 0===n&&(n="input"),e.customInput),o=e.renderText,u=e.getInputRef,l=e.format,f=(void 0===l&&(l=$),e.removeFormatting),d=(void 0===f&&(f=G),e.defaultValue),m=e.valueIsNumericString,g=e.onValueChange,v=e.isAllowed,p=e.onChange,h=(void 0===p&&(p=P),e.onKeyDown),S=(void 0===h&&(h=P),e.onMouseUp),y=(void 0===S&&(S=P),e.onFocus),b=(void 0===y&&(y=P),e.onBlur),w=(void 0===b&&(b=P),e.value),x=e.getCaretBoundary,e=(void 0===x&&(x=W),M(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary"])),w=U(w,d,Boolean(m),l,f,g),d=w[0],D=d.formattedValue,O=d.numAsString,N=w[1],V=T.useRef(),m=(T.useEffect(function(){var e,t=l(O);void 0!==V.current&&t===V.current||(e=E.current,A({formattedValue:t,numAsString:O,input:e,setCaretPosition:!0,source:R.props,event:void 0}))}),T.useState(!1)),g=m[0],C=m[1],E=T.useRef(null),F=T.useRef({setCaretTimeout:null,focusTimeout:null}),B=(T.useEffect(function(){return C(!0),function(){clearTimeout(F.current.setCaretTimeout),clearTimeout(F.current.focusTimeout)}},[]),l),j=function(e,t){var r=parseFloat(t);return{formattedValue:e,value:t,floatValue:isNaN(r)?void 0:r}},A=function(e){var t,r=e.formattedValue,n=(void 0===r&&(r=""),e.input),a=e.setCaretPosition,o=(void 0===a&&(a=!0),e.source),u=e.event,i=e.numAsString,l=e.caretPos;n&&(void 0===l&&a&&(e=e.inputValue||n.value,t=Math.max(n.selectionStart,n.selectionEnd),n.value=r,l=s(e,r,t)),n.value=r,a&&void 0!==l&&c(n,l,r)),r!==D&&(e=j(r,i),t={event:u,source:o},V.current=e.formattedValue,N(e,t))},d=g&&!("undefined"==typeof navigator||navigator.platform&&/iPhone|iPod/.test(navigator.platform))?"numeric":void 0,w=Object.assign({inputMode:d},e,{type:t,value:D,onChange:function(e){var t=e.target.value;r(t,e,R.event)&&p(e)},onKeyDown:function(e){var t,r=e.target,n=e.key,a=r.selectionStart,o=r.selectionEnd,u=r.value;void 0===u&&(u=""),"ArrowLeft"===n||"Backspace"===n?t=Math.max(a-1,0):"ArrowRight"===n?t=Math.min(a+1,u.length):"Delete"===n&&(t=a),void 0!==t&&a===o&&(a=t,"ArrowLeft"===n||"ArrowRight"===n?a=i(u,t,"ArrowLeft"===n?"left":"right"):"Delete"!==n||I(u[t])?"Backspace"!==n||I(u[t])||(a=i(u,t,"left")):a=i(u,t,"right"),a!==t&&c(r,a,u),e.isUnitTestRun&&c(r,a,u)),h(e)},onMouseUp:function(e){var t=e.target,r=t.selectionStart,n=t.selectionEnd,a=t.value;void 0===a&&(a=""),r===n&&(n=i(a,r))!==r&&c(t,n,a),S(e)},onFocus:function(a){a.persist();var o=a.target;E.current=o,F.current.focusTimeout=setTimeout(function(){var e=o.selectionStart,t=o.selectionEnd,r=o.value,n=i(r=void 0===r?"":r,e);n===e||0===e&&t===r.length||c(o,n,r),y(a)},0)},onBlur:function(e){E.current=null,clearTimeout(F.current.focusTimeout),clearTimeout(F.current.setCaretTimeout),b(e)}});return"text"===n?o?k.createElement(k.Fragment,null,o(D,e)||null):k.createElement("span",Object.assign({},e,{ref:u}),D):a?k.createElement(a,Object.assign({},w,{ref:u})):k.createElement("input",Object.assign({},w,{ref:u}))}function N(e,t){var r,n,a,o,u=t.decimalScale,i=t.fixedDecimalScale,l=t.prefix,c=(void 0===l&&(l=""),t.suffix),s=(void 0===c&&(c=""),t.allowNegative),f=(void 0===s&&(s=!0),t.thousandsGroupStyle);return void 0===f&&(f="thousand"),""!==e&&"-"!==e&&(r=(t=V(t)).thousandSeparator,t=t.decimalSeparator,n=0!==u&&-1!==e.indexOf(".")||u&&i,a=(s=g(e,s)).beforeDecimal,o=s.afterDecimal,s=s.addNegation,void 0!==u&&(o=v(o,u,!!i)),r&&(a=d(a,r,f)),l&&(a=l+a),c&&(o+=c),e=(a=s?"-"+a:a)+(n&&t||"")+o),e}function V(e){var t=e.decimalSeparator,r=e.thousandSeparator,e=e.allowedDecimalSeparators;return{decimalSeparator:t=void 0===t?".":t,thousandSeparator:r=!0===r?",":r,allowedDecimalSeparators:e=e||[t,"."]}}function C(e,t,r){void 0===t&&(t=p(e));var n=r.allowNegative,a=(void 0===n&&(n=!0),r.prefix),o=(void 0===a&&(a=""),r.suffix),u=(void 0===o&&(o=""),r.decimalScale),i=t.from,t=t.to,l=t.start,c=t.end,r=V(r),s=r.allowedDecimalSeparators,r=r.decimalSeparator,f=e[c]===r,u=(c-l==1&&-1!==s.indexOf(e[l])&&(s=0===u?"":r,e=e.substring(0,l)+s+e.substring(l+1,e.length)),!1),s=(a.startsWith("-")?u=e.startsWith("--"):o.startsWith("-")&&e.length===o.length?u=!1:"-"===e[0]&&(u=!0),u&&(e=e.substring(1),--l,--c),0),a=(e.startsWith(a)?s+=a.length:l<a.length&&(s=l),c-=s,(e=e.substring(s)).length),l=e.length-o.length,d=(e.endsWith(o)?a=l:c>e.length-o.length&&(a=c),e=e.substring(0,a),s=n,void 0===(l=u?"-"+e:e)&&(l=""),o=new RegExp("(-)"),c=new RegExp("(-)(.)*(-)"),o=o.test(l),c=c.test(l),l=l.replace(/-/g,""),(e=((e=l=o&&!c&&s?"-"+l:l).match((a=!0,new RegExp("(^-)|[0-9]|"+m(r),a?"g":void 0)))||[]).join("")).indexOf(r)),u=g(e=e.replace(new RegExp(m(r),"g"),function(e,t){return t===d?".":""}),n),o=u.beforeDecimal,c=u.afterDecimal,s=u.addNegation;return e=t.end-t.start<i.end-i.start&&""===o&&f&&!parseFloat(c)?s?"-":"":e}function E(e,t){var r=t.prefix,t=(void 0===r&&(r=""),t.suffix),n=(void 0===t&&(t=""),Array.from({length:e.length+1}).map(function(){return!0})),a="-"===e[0],r=(n.fill(!1,0,r.length+(a?1:0)),e.length);return n.fill(!1,r-t.length+1,r+1),n}function n(u){u.decimalSeparator,u.allowedDecimalSeparators,u.thousandsGroupStyle,u.suffix,u.allowNegative;var a=u.allowLeadingZeros,i=u.onKeyDown,o=(void 0===i&&(i=P),u.onBlur),l=(void 0===o&&(o=P),u.thousandSeparator),c=u.decimalScale,s=u.fixedDecimalScale,f=u.prefix,e=(void 0===f&&(f=""),u.defaultValue),t=u.value,r=u.valueIsNumericString,n=u.onValueChange,d=M(u,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=(g=V(g=u)).thousandSeparator,g=g.decimalSeparator;if(m===g)throw new Error("\n        Decimal separator can't be same as thousand separator.\n        thousandSeparator: "+m+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n        decimalSeparator: '+g+" (default value for decimalSeparator is .)\n     ");function v(e){return N(e,u)}function p(e,t){return C(e,t,u)}function h(e){return!w(e)&&!x(e)&&("number"==typeof e&&(e=D(e)),S&&"number"==typeof c)?O(e,c,Boolean(s)):e}var S=r,m=(w(t)?w(e)||(S=null!=r?r:"number"==typeof e):S=null!=r?r:"number"==typeof t,U(h(t),h(e),Boolean(S),v,p,n)),g=m[0],y=g.numAsString,r=g.formattedValue,b=m[1];return Object.assign(Object.assign({},d),{value:r,valueIsNumericString:!1,onValueChange:b,format:v,removeFormatting:p,getCaretBoundary:function(e){return E(e,u)},onKeyDown:function(e){var t=e.target,r=e.key,n=t.selectionStart,a=t.selectionEnd,o=t.value;void 0===o&&(o=""),n===a&&("Backspace"===r&&"-"===o[0]&&n===f.length+1&&K(t,1),a=V(u).decimalSeparator,"Backspace"===r&&o[n-1]===a&&c&&s&&(K(t,n-1),e.preventDefault()),a=!0===l?",":l,"Backspace"===r&&o[n-1]===a&&K(t,n-1),"Delete"===r&&o[n]===a&&K(t,n+1)),i(e)},onBlur:function(e){var t,r,n=y;n.match(/\d/g)||(n=""),a||(n=(r=n)&&((t="-"===r[0])?"-":"")+((t=(r=t?r.substring(1,r.length):r).split("."))[0].replace(/^0+/,"")||"0")+((t=t[1]||"")?"."+t:"")),(n=s&&c?O(n,c,s):n)!==y&&(r=N(n,u),b({formattedValue:r,value:n,floatValue:parseFloat(n)},{event:e,source:R.event})),o(e)}})}function o(e,t){var r=t.format,n=t.allowEmptyFormatting,a=t.mask,o=t.patternChar;if(void 0===o&&(o="#"),""===e&&!n)return"";for(var u=0,i=r.split(""),l=0,c=r.length;l<c;l++)r[l]===o&&(i[l]=e[u]||h(a,u),u+=1);return i.join("")}function u(e,t,r){void 0===t&&(t=p(e));function a(e){return u[e]===i}function n(e,t){for(var r="",n=0;n<e.length;n++)a(t+n)&&(r+=e[n]);return r}function o(e){return e.replace(/[^0-9]/g,"")}var u=r.format,i=r.patternChar,r=(void 0===i&&(i="#"),t.from),l=t.to,t=t.lastValue;void 0===t&&(t="");if(!u.match(/\d/))return o(e);if(""===t&&e.length===u.length){for(var c="",s=0;s<e.length;s++)if(a(s))c+=e[s];else if(e[s]!==u[s])return o(e);return c}var f=t.substring(0,r.start),l=e.substring(l.start,l.end),t=t.substring(r.end);return""+n(f,0)+o(l)+n(t,r.end)}function i(n,e){for(var t=e.format,a=e.mask,o=e.patternChar,r=(void 0===o&&(o="#"),Array.from({length:n.length+1}).map(function(){return!0})),u=0,i=-1,l={},c=(t.split("").forEach(function(e,t){var r=void 0;e===o&&(r=h(a,++u-1),-1===i&&n[t]===r&&(i=t)),l[t]=r}),function(e){return t[e]===o&&n[e]!==l[e]}),s=0,f=r.length;s<f;s++)r[s]=s===i||c(s)||c(s-1);return r[t.indexOf(o)]=!0,r}function l(r){r.mask,r.allowEmptyFormatting;var l=r.format,e=r.inputMode,c=(void 0===e&&(e="numeric"),r.onKeyDown),s=(void 0===c&&(c=P),r.patternChar),t=(void 0===s&&(s="#"),M(r,["mask","allowEmptyFormatting","format","inputMode","onKeyDown","patternChar"])),n=r;if((n=n.mask)&&("string"===n?n:n.toString()).match(/\d/g))throw new Error("Mask "+n+" should not contain numeric character;");function f(e){return i(e,r)}return Object.assign(Object.assign({},t),{inputMode:e,format:function(e){return o(e,r)},removeFormatting:function(e,t){return u(e,t,r)},getCaretBoundary:f,onKeyDown:function(e){var t=e.key,r=e.target,n=r.selectionStart,a=r.selectionEnd,o=r.value;if(n===a){var u=n;if("Backspace"===t||"Delete"===t){a="right";if("Backspace"===t){for(;0<u&&l[u-1]!==s;)u--;a="left"}else{for(var i=l.length;u<i&&l[u]!==s;)u++;a="right"}u=L(o,u,f(o),a)}else l[u]!==s&&"ArrowLeft"!==t&&"ArrowRight"!==t&&(u=L(o,u+1,f(o),"right"));u!==n&&K(r,u)}c(e)}})}(t=R=R||{}).event="event",t.props="prop",e.NumberFormatBase=r,e.NumericFormat=function(e){return e=n(e),k.createElement(r,Object.assign({},e))},e.PatternFormat=function(e){return e=l(e),k.createElement(r,Object.assign({},e))},e.getNumericCaretBoundary=E,e.getPatternCaretBoundary=i,e.numericFormatter=N,e.patterFormatter=o,e.removeNumericFormat=C,e.removePatternFormat=u,e.useNumericFormat=n,e.usePatternFormat=l,Object.defineProperty(e,"__esModule",{value:!0})});
